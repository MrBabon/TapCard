<div class="w-full fixed">
    <div class="flex w-full justify-between items-center pt-8 pb-3 pr-3  bg-TapCard-charcoal">
    <%= link_to :back, class: "ml-2" do %>
            <%= image_tag "plus-circle.svg", alt: "chevron", class: "w-5" %>
    <% end %>
    <div class="flex-1 text-center ml-2">
        <h2 class="mx-auto text-TapCard-lightGray uppercase font-semibold font-jost">Groups</h2>
    </div>
    <%# Link Ã  changer quand la chatroom sera mis en place %>
    <%= link_to user_path(current_user) do %>
        <%= image_tag "envelope-regular.svg", alt: "envelope", class: "w-5" %>
    <% end %>
    </div>
    <div class="flex justify-around bg-white px-4 py-3">
        <%= link_to repertoire_user_path(current_user) do %>
            <h6 class="font-semibold font-jost relative after:block after:h-0.5 after:w-1/2 after:absolute after:-bottom-1 after:left-1/4 after:origin-bottom-left after:transform after:ease-in-out after:duration-200 after:bg-TapCard-yellow">My Cards</h6>
        <% end %>
        <%= link_to repertoire_user_path(current_user) do %>
            <h6 class="font-semibold font-jost">Entreprises</h6>
        <% end %>
    </div>
</div>
<div class=" pt-28"></div>
<%= form_with url: repertoire_user_path, method: :get, class: "flex justify-around items-center space-y-2 mt-2 py-2 border-t" do %>
    <%= text_field_tag :search,
            params[:search],
            class: "form-control text-black font-light h-full mx-9 h-7 rounded border-none",
            placeholder: "Search Contacts"
        %>
        <div class="flex justify-center pt-1 pb-2 ">
            <%= submit_tag "Search", name: "", class: "bg-TapCard-blue rounded-2xl px-4 py-1 text-TapCard-lightGray" %>
        </div>
<% end %>
<% if @search_active %>
    <% if @users.any? %>
        <ul class="capitalize border-y px-6 py-4 text-lg">
            <% @users.each do |user| %>
                <%= link_to repertoire_user_profile_user_path(user) do %>
                    <li class="flex justify-between items-center">
                        <p><%= user.first_name %> <%= user.last_name %></p>
                        <div>
                            <% if user.avatar.attached? %>
                                <%= cl_image_tag user.avatar.key, alt: "Avatar to #{user.first_name}", class: "rounded-full object-cover object-center w-12 h-12 border shadow-md" %>
                            <% else %>    
                                <%= image_tag("avatar.svg", class: "rounded-full w-12 h-12 bg-cover bg-center border shadow-md") %>
                            <% end %>
                        </div> 
                    </li>
                <% end %>
            <% end %>
        </ul>
    <% else %>
        <p class="px-6">No users found.</p>
    <% end %>
<% else %>
    <ul class="capitalize border-y px-6 py-4 text-lg">
        <% @contact_groups.each do |group| %>
            <%= link_to contact_group_path(group) do %>
                <li class="flex justify-between">
                    <p><%= group.name %></p>
                    <p><%= group.users_contact_groups.count %></p>
                </li>
            <% end %>
        <% end %>    
    </ul>
<% end %>